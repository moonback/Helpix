import{c as C,r as N,j as e,u as ye,a as ve,b as je,P as F,B as Y,M as X}from"./index-CpgGJGF8.js";import{u as Ne}from"./taskStore-BcuLaIkq.js";import{B as v,m as j}from"./Button-BBV6hfQw.js";import{C as Z}from"./Card-CEMe8S5M.js";import{I as we}from"./Input-8yZ7yRIl.js";import{N as I,D as Ce}from"./navigation-CNwS7Wzo.js";import{I as ke,R as J}from"./refresh-cw-C9_F45xr.js";import{M as z}from"./map-pin-DoY9rUxZ.js";import{A as B}from"./index-5ukV9Jv9.js";import{F as q}from"./filter-BzKQoO0F.js";import{X as le}from"./x-Bgj35mxq.js";import{A as ie}from"./alert-triangle-CJtG5eNb.js";import{f as Le,c as Se}from"./utils-Da9La_Se.js";import{U as Ae}from"./users-TI-X7IkC.js";import{H as Me}from"./heart-45QSbXbR.js";import{T as $e}from"./trending-up-CDP-oKsV.js";import{S as De}from"./search-lrFEIuW5.js";import{C as ee,T as Te,a as Ee}from"./target-0-LhkmaO.js";import{E as se}from"./eye-DB7B1MFX.js";import{P as ze}from"./pen-square-LNhkaQnc.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=C("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=C("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=C("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=C("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=C("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=C("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=C("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=C("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"aigmz7"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"1n6bmn"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8",key:"a9iiix"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=C("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=C("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=C("MapPinned",[["path",{d:"M18 8c0 4.5-6 9-6 9s-6-4.5-6-9a6 6 0 0 1 12 0",key:"yrbn30"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.835 14H5a1 1 0 0 0-.9.7l-2 6c-.1.1-.1.2-.1.3 0 .6.4 1 1 1h18c.6 0 1-.4 1-1 0-.1 0-.2-.1-.3l-2-6a1 1 0 0 0-.9-.7h-3.835",key:"112zkj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=C("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=C("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=C("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),We=()=>{const[d,n]=N.useState({latitude:null,longitude:null,accuracy:null,error:null,isLoading:!1}),u=N.useCallback(()=>{if(!navigator.geolocation){n(p=>({...p,error:"La géolocalisation n'est pas supportée par votre navigateur",isLoading:!1}));return}n(p=>({...p,isLoading:!0,error:null}));const b=(p=1,m=3)=>{const k={enableHighAccuracy:p===1,timeout:p===1?15e3:1e4,maximumAge:p===1?0:3e5};navigator.geolocation.getCurrentPosition(y=>{y.coords.accuracy<100||p===m?n({latitude:y.coords.latitude,longitude:y.coords.longitude,accuracy:y.coords.accuracy,error:null,isLoading:!1}):p<m?setTimeout(()=>b(p+1,m),1e3):n({latitude:y.coords.latitude,longitude:y.coords.longitude,accuracy:y.coords.accuracy,error:null,isLoading:!1})},y=>{if(p<m)setTimeout(()=>b(p+1,m),1e3);else{let g="Erreur de géolocalisation";switch(y.code){case y.PERMISSION_DENIED:g="Permission de géolocalisation refusée. Veuillez l'activer dans les paramètres de votre navigateur.";break;case y.POSITION_UNAVAILABLE:g="Informations de localisation indisponibles.";break;case y.TIMEOUT:g="Délai d'attente dépassé pour la géolocalisation.";break;default:g="Erreur inconnue lors de la géolocalisation."}n(l=>({...l,error:g,isLoading:!1}))}},k)};b()},[]),f=N.useCallback(()=>{n({latitude:null,longitude:null,accuracy:null,error:null,isLoading:!1})},[]);return N.useEffect(()=>{u()},[u]),{...d,requestLocation:u,clearLocation:f}},Ke=[{name:"Nominatim",url:"https://nominatim.openstreetmap.org/reverse",timeout:8e3,headers:{"Accept-Language":"fr,en","User-Agent":"EntraideUniverselle/1.0"}},{name:"BigDataCloud",url:"https://api.bigdatacloud.net/data/reverse-geocode-client",timeout:1e4,headers:{"Accept-Language":"fr,en"}},{name:"LocationIQ (Fallback)",url:"https://us1.locationiq.com/v1/reverse.php",timeout:8e3,headers:{"Accept-Language":"fr,en"},requiresKey:!0}],re=new Map,Qe=24*60*60*1e3,Ye=()=>{const[d,n]=N.useState({address:null,isLoading:!1,error:null}),u=N.useRef(null),f=N.useRef(0),b=3,p=(t,o)=>{const a=Math.round(t*1e4)/1e4,x=Math.round(o*1e4)/1e4;return`${a},${x}`},m=(t,o)=>{const a=p(t,o),x=re.get(a);return x&&Date.now()-x.timestamp<Qe?x.address:null},k=(t,o,a)=>{const x=p(t,o);re.set(x,{address:a,timestamp:Date.now()})},y=async(t,o,a)=>{const x=new AbortController,c=setTimeout(()=>x.abort(),a);try{const r=await fetch(t,{...o,signal:x.signal});return clearTimeout(c),r}catch(r){throw clearTimeout(c),r}},g=t=>{let o="",a="",x="",c="";if(t.address){const r=t.address;r.house_number&&r.road?a=`${r.house_number} ${r.road}`:r.road?a=r.road:r.pedestrian?a=r.pedestrian:r.footway?a=r.footway:r.path&&(a=r.path);let h=[];r.postcode&&h.push(r.postcode),r.city?h.push(r.city):r.town?h.push(r.town):r.village?h.push(r.village):r.hamlet?h.push(r.hamlet):r.municipality&&h.push(r.municipality),x=h.join(" ");let L=[];r.county?L.push(r.county):r.state?L.push(r.state):r.region&&L.push(r.region),r.country&&r.country!=="France"&&L.push(r.country),c=L.join(", ");let S=[];a&&S.push(a),x&&S.push(x),c&&S.push(c),o=S.join(", ")}return!o&&t.display_name&&(o=t.display_name.split(",").slice(0,4).join(",").trim()),o&&(o=o.replace(/\s+/g," ").trim(),o=o.replace(/,+/g,",").trim(),o=o.replace(/^,|,$/g,"").trim()),o||"Adresse non disponible"},l=t=>{let o="",a=[];if(t.localityInfo&&t.localityInfo.administrative){const x=t.localityInfo.administrative;t.streetNumber&&t.street?a.push(`${t.streetNumber} ${t.street}`):t.street&&a.push(t.street),t.postcode&&t.city?a.push(`${t.postcode} ${t.city}`):t.city&&a.push(t.city),x[1]&&x[1].name&&a.push(x[1].name),t.countryName&&t.countryName!=="France"&&a.push(t.countryName),o=a.join(", ")}return o||t.locality||"Adresse non disponible"},_=async(t,o,a)=>{let x,c;t.name==="BigDataCloud"?(x=new URLSearchParams({latitude:o.toString(),longitude:a.toString(),localityLanguage:"fr"}),c=`${t.url}?${x.toString()}`):(x=new URLSearchParams({format:"json",lat:o.toString(),lon:a.toString(),zoom:"18",addressdetails:"1",extratags:"1",namedetails:"1","accept-language":"fr,en"}),c=`${t.url}?${x.toString()}`);const r=await y(c,{headers:t.headers},t.timeout);if(!r.ok)throw new Error(`Service ${t.name} a retourné ${r.status}`);const h=await r.json();if(h.error)throw new Error(h.error);return t.name==="BigDataCloud"?l(h):g(h)},T=N.useCallback(async(t,o)=>{u.current&&u.current.abort();const a=m(t,o);if(a){n({address:a,isLoading:!1,error:null});return}u.current=new AbortController,f.current=0;try{n(c=>({...c,isLoading:!0,error:null}));let x=null;for(const c of Ke)try{if(c.requiresKey)continue;const r=await _(c,t,o);k(t,o,r),n({address:r,isLoading:!1,error:null});return}catch(r){x=r,console.warn(`Service ${c.name} a échoué:`,r);continue}if(x){const c=`Coordonnées: ${t.toFixed(6)}, ${o.toFixed(6)}`;k(t,o,c),n({address:c,isLoading:!1,error:null})}}catch(x){console.error("Erreur de géocodification inverse:",x);const c=`Coordonnées: ${t.toFixed(6)}, ${o.toFixed(6)}`;k(t,o,c),n(r=>({...r,address:c,error:"Service temporairement indisponible, affichage des coordonnées",isLoading:!1}))}},[]),U=N.useCallback(()=>{f.current<b&&(f.current++,setTimeout(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{T(t.coords.latitude,t.coords.longitude)},t=>{console.error("Erreur lors de la récupération de la position:",t),n(o=>({...o,error:"Impossible de récupérer la position actuelle"}))})},Math.pow(2,f.current)*1e3))},[T]),P=N.useCallback(()=>{u.current&&u.current.abort(),n({address:null,isLoading:!1,error:null})},[]);return{...d,getAddressFromCoords:T,clearAddress:P,retry:U}},Xe=({hasPermission:d,isLoading:n,error:u,onRequestLocation:f,className:b=""})=>n?e.jsx("div",{className:`bg-blue-50 border border-blue-200 rounded-lg p-4 ${b}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Localisation en cours..."}),e.jsx("p",{className:"text-xs text-blue-600",children:"Nous récupérons votre position pour afficher les tâches les plus proches"})]})]})}):u?e.jsx("div",{className:`bg-red-50 border border-red-200 rounded-lg p-4 ${b}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(O,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-red-800 mb-2",children:"Erreur de géolocalisation"}),e.jsx("p",{className:"text-xs text-red-600 mb-3",children:u}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(v,{variant:"outline",size:"sm",onClick:f,className:"text-red-600 border-red-300 hover:bg-red-50",children:[e.jsx(I,{className:"w-4 h-4 mr-1"}),"Réessayer"]}),e.jsxs(v,{variant:"ghost",size:"sm",className:"text-red-600 hover:bg-red-100",onClick:()=>window.open("https://support.google.com/chrome/answer/142065?hl=fr","_blank"),children:[e.jsx(Ve,{className:"w-4 h-4 mr-1"}),"Aide"]})]})]})]})}):d?null:e.jsx("div",{className:`bg-yellow-50 border border-yellow-200 rounded-lg p-4 ${b}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ke,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800 mb-2",children:"Géolocalisation requise"}),e.jsx("p",{className:"text-xs text-yellow-600 mb-3",children:"Activez la géolocalisation pour voir les tâches les plus proches de chez vous"}),e.jsxs(v,{variant:"outline",size:"sm",onClick:f,className:"text-yellow-600 border-yellow-300 hover:bg-yellow-50",children:[e.jsx(I,{className:"w-4 h-4 mr-1"}),"Activer la localisation"]})]})]})}),Ze=({address:d,isLoading:n,error:u,showIcon:f=!0,className:b="",onRetry:p,showRetryButton:m=!0})=>{if(n)return e.jsxs("div",{className:`flex items-center gap-2 text-sm text-blue-600 ${b}`,children:[e.jsx(Be,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Récupération de l'adresse..."})]});if(u)return e.jsxs("div",{className:`flex items-center gap-2 text-sm text-orange-600 ${b}`,children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{className:"flex-1",children:u.includes("Service temporairement indisponible")?"Service temporairement indisponible":"Adresse non disponible"}),m&&p&&e.jsx(v,{variant:"ghost",size:"sm",onClick:p,className:"p-1 h-auto text-orange-600 hover:text-orange-700 hover:bg-orange-50",children:e.jsx(J,{className:"w-3 h-3"})})]});if(d){if(d.startsWith("Coordonnées:"))return e.jsxs("div",{className:`flex items-center gap-2 text-sm text-amber-600 ${b}`,children:[e.jsx(z,{className:"w-4 h-4"}),e.jsx("span",{className:"flex-1",children:"Position détectée (adresse en cours de récupération)"}),m&&p&&e.jsx(v,{variant:"ghost",size:"sm",onClick:p,className:"p-1 h-auto text-amber-600 hover:text-amber-700 hover:bg-amber-50",children:e.jsx(J,{className:"w-3 h-3"})})]});const y=d.split(",");return e.jsxs("div",{className:`flex items-start gap-2 ${b}`,children:[f&&e.jsx(z,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("div",{className:"flex flex-col min-w-0",children:y.length>1?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm font-medium text-green-700 truncate",children:y[0].trim()}),e.jsx("span",{className:"text-xs text-green-600",children:y.slice(1).join(",").trim()})]}):e.jsx("span",{className:"text-sm text-green-700 truncate",children:d})})]})}return e.jsxs("div",{className:`flex items-center gap-2 text-sm text-gray-500 ${b}`,children:[e.jsx(z,{className:"w-4 h-4"}),e.jsx("span",{children:"Adresse non disponible"})]})},Je=({isOpen:d,onClose:n,selectedCategory:u,selectedPriority:f,onCategoryChange:b,onPriorityChange:p})=>{var y,g;const m=[{key:"all",label:"Toutes",icon:"🔍",description:"Afficher toutes les tâches"},{key:"local",label:"Sur place",icon:"📍",description:"Tâches nécessitant une présence physique"},{key:"remote",label:"À distance",icon:"💻",description:"Tâches réalisables en ligne"}],k=[{key:"all",label:"Toutes",icon:"🔍",description:"Afficher toutes les priorités"},{key:"urgent",label:"Urgentes",icon:"🔴",description:"Tâches nécessitant une action immédiate"},{key:"high",label:"Élevées",icon:"🟠",description:"Tâches importantes à traiter rapidement"},{key:"medium",label:"Moyennes",icon:"🟡",description:"Tâches avec une priorité normale"},{key:"low",label:"Faibles",icon:"🟢",description:"Tâches non urgentes"}];return e.jsx(B,{children:d&&e.jsxs(e.Fragment,{children:[e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-40",onClick:n}),e.jsx(j.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-500 to-primary-600 p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-full",children:e.jsx(q,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Filtres"}),e.jsx("p",{className:"text-primary-100 text-sm",children:"Affinez votre recherche"})]})]}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(le,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"p-6 space-y-6 max-h-[calc(90vh-140px)] overflow-y-auto",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(z,{className:"w-5 h-5 text-primary-600"}),e.jsx("h3",{className:"font-semibold text-lg",children:"Type de tâche"})]}),e.jsx("div",{className:"grid gap-3",children:m.map(l=>e.jsx("button",{onClick:()=>b(l.key),className:`p-4 rounded-xl border-2 transition-all duration-200 text-left ${u===l.key?"border-primary-500 bg-primary-50 shadow-lg":"border-gray-200 bg-white hover:border-primary-200 hover:bg-primary-25"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:l.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`font-semibold ${u===l.key?"text-primary-700":"text-gray-800"}`,children:l.label}),e.jsx("div",{className:`text-sm ${u===l.key?"text-primary-600":"text-gray-500"}`,children:l.description})]}),u===l.key&&e.jsx("div",{className:"w-3 h-3 bg-primary-500 rounded-full"})]})},l.key))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx(ie,{className:"w-5 h-5 text-primary-600"}),e.jsx("h3",{className:"font-semibold text-lg",children:"Niveau de priorité"})]}),e.jsx("div",{className:"grid gap-3",children:k.map(l=>e.jsx("button",{onClick:()=>p(l.key),className:`p-4 rounded-xl border-2 transition-all duration-200 text-left ${f===l.key?"border-primary-500 bg-primary-50 shadow-lg":"border-gray-200 bg-white hover:border-primary-200 hover:bg-primary-25"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:l.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`font-semibold ${f===l.key?"text-primary-700":"text-gray-800"}`,children:l.label}),e.jsx("div",{className:`text-sm ${f===l.key?"text-primary-600":"text-gray-500"}`,children:l.description})]}),f===l.key&&e.jsx("div",{className:"w-3 h-3 bg-primary-500 rounded-full"})]})},l.key))})]}),(u!=="all"||f!=="all")&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Filtres actifs :"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[u!=="all"&&e.jsx("span",{className:"px-3 py-1 bg-primary-100 text-primary-700 rounded-full text-sm font-medium",children:(y=m.find(l=>l.key===u))==null?void 0:y.label}),f!=="all"&&e.jsx("span",{className:"px-3 py-1 bg-primary-100 text-primary-700 rounded-full text-sm font-medium",children:(g=k.find(l=>l.key===f))==null?void 0:g.label})]})]})]}),e.jsx("div",{className:"bg-gray-50 p-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"outline",onClick:()=>{b("all"),p("all")},className:"flex-1",children:"Réinitialiser"}),e.jsx(v,{variant:"primary",onClick:n,className:"flex-1",children:"Appliquer"})]})})]})})]})})},es=({onClick:d,activeFiltersCount:n=0,variant:u="outline",size:f="sm",className:b=""})=>e.jsxs(v,{variant:u,size:f,onClick:d,className:`relative ${b}`,children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"Filtres",n>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-primary-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium",children:n})]}),ae=({label:d,icon:n,onRemove:u,variant:f="primary",className:b=""})=>{const p={primary:"bg-primary-100 text-primary-700 border-primary-200",secondary:"bg-gray-100 text-gray-700 border-gray-200",success:"bg-green-100 text-green-700 border-green-200",warning:"bg-yellow-100 text-yellow-700 border-yellow-200",danger:"bg-red-100 text-red-700 border-red-200"};return e.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium border ${p[f]} ${b}`,children:[e.jsx("span",{className:"text-base",children:n}),e.jsx("span",{children:d}),e.jsx("button",{onClick:u,className:"ml-1 p-0.5 hover:bg-current hover:bg-opacity-20 rounded-full transition-colors",children:e.jsx(le,{className:"w-3 h-3"})})]})},js=()=>{const d=ye(),{tasks:n,fetchTasks:u,isLoading:f,setUserLocation:b,getTasksByProximity:p}=Ne(),{user:m,updateUserLocation:k}=ve(),{createConversation:y}=je(),{latitude:g,longitude:l,error:_,isLoading:T,requestLocation:U}=We(),{address:P,getAddressFromCoords:t,retry:o}=Ye(),[a,x]=N.useState(""),[c,r]=N.useState("all"),[h,L]=N.useState("all"),[S,oe]=N.useState(!0),[R,ne]=N.useState("desc"),[A,V]=N.useState("list"),[ce,G]=N.useState(!1),[de,H]=N.useState(!0);N.useEffect(()=>{u()},[]),N.useEffect(()=>{g&&l&&(b(g,l),m&&k(g,l),t(g,l))},[g,l,m==null?void 0:m.id]);const W=s=>s&&s.id&&s.title&&s.description&&s.category&&s.priority&&s.location&&s.required_skills&&s.tags&&s.estimated_duration!==void 0&&s.budget_credits!==void 0,$=N.useMemo(()=>{let s=n.filter(i=>{if(!W(i))return!1;const w=i.title.toLowerCase().includes(a.toLowerCase())||i.description.toLowerCase().includes(a.toLowerCase())||i.location.toLowerCase().includes(a.toLowerCase())||i.tags.some(D=>D.toLowerCase().includes(a.toLowerCase()))||i.required_skills.some(D=>D.toLowerCase().includes(a.toLowerCase())),M=c==="all"||i.category===c,E=h==="all"||i.priority===h;return w&&M&&E});return S&&g&&l?s=p().filter(i=>{if(!W(i))return!1;const w=i.title.toLowerCase().includes(a.toLowerCase())||i.description.toLowerCase().includes(a.toLowerCase())||i.location.toLowerCase().includes(a.toLowerCase())||i.tags.some(D=>D.toLowerCase().includes(a.toLowerCase()))||i.required_skills.some(D=>D.toLowerCase().includes(a.toLowerCase())),M=c==="all"||i.category===c,E=h==="all"||i.priority===h;return w&&M&&E}):s.sort((i,w)=>{const M=new Date(i.created_at).getTime(),E=new Date(w.created_at).getTime();return R==="desc"?E-M:M-E}),s},[n,a,c,h,S,R,g,l]),me=N.useMemo(()=>[{title:"Demandes actives",value:n.length,icon:e.jsx(Fe,{className:"w-6 h-6"}),color:"from-blue-500 to-blue-600",trend:"+12%"},{title:"Près de vous",value:g&&l?p().slice(0,10).length:0,icon:e.jsx(Oe,{className:"w-6 h-6"}),color:"from-emerald-500 to-emerald-600",trend:"+5%"},{title:"Urgentes",value:n.filter(s=>s.priority==="urgent").length,icon:e.jsx(ie,{className:"w-6 h-6"}),color:"from-red-500 to-red-600"},{title:"Nouvelles aujourd'hui",value:n.filter(s=>{const i=new Date;return new Date(s.created_at).toDateString()===i.toDateString()}).length,icon:e.jsx(Ge,{className:"w-6 h-6"}),color:"from-purple-500 to-purple-600"}],[n,g,l]),xe=[{icon:e.jsx(F,{className:"w-6 h-6"}),title:"Créer une tâche",description:"Demander de l'aide à votre communauté",color:"from-blue-500 to-indigo-600",action:()=>d("/create-task")},{icon:e.jsx(te,{className:"w-6 h-6"}),title:"Offrir mon aide",description:"Découvrir comment aider les autres",color:"from-emerald-500 to-teal-600",action:()=>{L("urgent"),H(!1)}},{icon:e.jsx(X,{className:"w-6 h-6"}),title:"Mes conversations",description:"Gérer vos échanges en cours",color:"from-purple-500 to-violet-600",action:()=>d("/chat")},{icon:e.jsx(Y,{className:"w-6 h-6"}),title:"Tableau de bord",description:"Suivre votre activité",color:"from-orange-500 to-red-600",action:()=>d("/dashboard")}],he={low:"bg-emerald-100 text-emerald-800 border-emerald-200",medium:"bg-amber-100 text-amber-800 border-amber-200",high:"bg-orange-100 text-orange-800 border-orange-200",urgent:"bg-red-100 text-red-800 border-red-200"},K={low:"🟢",medium:"🟡",high:"🟠",urgent:"🔴"},ue={local:"📍",remote:"💻"},pe=async s=>{if(!m){d("/login");return}try{const i=n.find(w=>w.id===s);if(!i){console.error("Tâche non trouvée");return}if(i.user_id===m.id){console.log("Vous ne pouvez pas vous aider vous-même");return}await y([m.id,i.user_id]),d("/chat")}catch(i){console.error("Erreur lors de la création de la conversation:",i)}},ge=async s=>{if(!m){d("/login");return}try{const i=n.find(w=>w.id===s);if(!i){console.error("Tâche non trouvée");return}if(i.user_id===m.id){console.log("Vous ne pouvez pas vous contacter vous-même");return}await y([m.id,i.user_id]),d("/chat")}catch(i){console.error("Erreur lors de la création de la conversation:",i)}},fe=s=>{d(`/edit-task/${s}`)},Q=s=>{d(`/task/${s}`)},be=()=>{ne(s=>s==="asc"?"desc":"asc")};return f?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs(j.div,{className:"text-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6},children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("div",{className:"w-24 h-24 mx-auto bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-2xl",children:e.jsx(Ae,{className:"w-12 h-12 text-white"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full animate-ping opacity-20"}),e.jsx("div",{className:"absolute -inset-4 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full animate-pulse opacity-10"})]}),e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-700 mb-3",children:"Chargement en cours..."}),e.jsx("p",{className:"text-slate-500 text-lg",children:"Préparation de votre expérience d'entraide"}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:[e.jsx("div",{className:"w-full bg-gradient-to-r from-slate-50 via-white to-blue-50 border-b border-slate-200/50 shadow-sm",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-4",children:e.jsx(j.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.6},className:"w-full",children:e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-2xl",children:"👋"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 rounded-full border-2 border-white flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-800 mb-1 truncate",children:["Bonjour ",(m==null?void 0:m.name)||"Emilie Pajor"," ! 🌟"]}),e.jsx("p",{className:"text-slate-600 text-base lg:text-lg",children:"Découvrez les opportunités d'entraide autour de vous"})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center gap-3 lg:gap-4",children:[e.jsx("div",{className:"flex items-center",children:T?e.jsxs("div",{className:"flex items-center space-x-2 text-slate-600 bg-slate-50 px-3 py-2 rounded-xl border",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Localisation..."})]}):g&&l?e.jsxs("div",{className:"flex items-center space-x-2 text-emerald-700 bg-emerald-50 px-3 py-2 rounded-xl border border-emerald-200",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-4 h-4 bg-emerald-500 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),e.jsx("div",{className:"absolute inset-0 bg-emerald-500 rounded-full animate-ping opacity-40"})]}),e.jsx(Ze,{address:P,isLoading:!P,error:null,showIcon:!1,className:"text-emerald-700 text-sm font-medium truncate max-w-[200px]",onRetry:o})]}):_?e.jsxs("div",{className:"flex items-center space-x-2 text-red-600 bg-red-50 px-3 py-2 rounded-xl border border-red-200",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"❌ Erreur localisation"})]}):e.jsxs("div",{className:"flex items-center space-x-2 text-slate-500 bg-slate-50 px-3 py-2 rounded-xl border",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"📍 Non localisé"})]})}),e.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[e.jsxs(v,{onClick:()=>d("/create-task"),className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-4 lg:px-6 py-2 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Créer une tâche"}),e.jsx("span",{className:"sm:hidden",children:"Créer"})]}),e.jsxs(v,{onClick:()=>d("/dashboard"),variant:"outline",className:"border-slate-300 hover:border-blue-500 hover:text-blue-600 px-4 lg:px-6 py-2 rounded-xl transition-all duration-200",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Tableau de bord"}),e.jsx("span",{className:"sm:hidden",children:"Stats"})]})]})]})]})})})}),e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-700 text-white",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-white/5 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-white/5 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]}),e.jsx("div",{className:"relative px-6 py-16 lg:py-20",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs(j.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut"},className:"text-center",children:[e.jsx(j.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,duration:.8,type:"spring",stiffness:200},className:"inline-flex items-center justify-center w-20 h-20 bg-white/20 rounded-full mb-8 backdrop-blur-sm border border-white/30",children:e.jsx(Me,{className:"w-10 h-10"})}),e.jsx(j.h1,{className:"text-5xl lg:text-7xl font-bold mb-6 bg-gradient-to-r from-white via-blue-100 to-purple-100 bg-clip-text text-transparent",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.8},children:"Entraide Universelle"}),e.jsxs(j.p,{className:"text-xl lg:text-2xl text-blue-100 mb-10 max-w-4xl mx-auto leading-relaxed",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.8},children:["Une communauté bienveillante où chacun peut donner et recevoir de l'aide.",e.jsx("span",{className:"block mt-2 text-lg",children:"Connectez-vous localement, agissez globalement."})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 max-w-6xl mx-auto mb-10",children:me.map((s,i)=>e.jsxs(j.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{delay:.8+i*.1,duration:.6},className:"bg-white/10 backdrop-blur-md rounded-3xl p-6 border border-white/20 hover:bg-white/15 transition-all duration-300",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 bg-gradient-to-r ${s.color} rounded-2xl mb-4`,children:s.icon}),e.jsx("div",{className:"text-3xl font-bold mb-2",children:s.value}),e.jsx("div",{className:"text-blue-100 text-sm font-medium",children:s.title}),s.trend&&e.jsxs("div",{className:"text-green-300 text-xs mt-1 flex items-center",children:[e.jsx($e,{className:"w-3 h-3 mr-1"}),s.trend]})]},s.title))}),e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.2,duration:.6},className:"flex flex-col sm:flex-row gap-4 justify-center",children:e.jsxs(v,{onClick:()=>d("/create-task"),className:"bg-white text-indigo-600 hover:bg-gray-50 px-8 py-4 rounded-2xl font-semibold text-lg shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300",children:[e.jsx(F,{className:"w-5 h-5 mr-2"}),"Créer ma première tâche"]})})]})})})]}),e.jsx("div",{className:"relative z-10 px-6 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx(B,{children:de&&e.jsx(j.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.5},className:"mb-8",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-white/50 p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[e.jsx(Re,{className:"w-6 h-6 text-yellow-500"}),"Actions rapides"]}),e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>H(!1),className:"text-slate-500 hover:text-slate-700",children:"Masquer"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:xe.map((s,i)=>e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.1,duration:.5},onClick:s.action,className:"group cursor-pointer",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl border border-slate-200 hover:border-transparent hover:scale-105 transition-all duration-300",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${s.color} rounded-2xl flex items-center justify-center mb-4 text-white group-hover:scale-110 transition-transform duration-300`,children:s.icon}),e.jsx("h4",{className:"font-semibold text-slate-800 mb-2 group-hover:text-blue-600 transition-colors",children:s.title}),e.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:s.description})]})},s.title))})]})})}),e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.8},className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-white/50 p-8 mb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(De,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 w-6 h-6"}),e.jsx(we,{placeholder:"Rechercher par titre, description, compétences, tags, ou localisation...",value:a,onChange:s=>x(s.target.value),className:"pl-14 py-4 text-lg border-slate-200 focus:border-blue-500 focus:ring-blue-500 rounded-2xl shadow-sm"}),a&&e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>x(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:"×"})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(es,{onClick:()=>G(!0),activeFiltersCount:(c!=="all"?1:0)+(h!=="all"?1:0),className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white border-0 px-6 py-3 rounded-2xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200"}),e.jsx(v,{variant:"outline",onClick:be,className:"px-4 py-3 rounded-2xl border-slate-200 hover:border-blue-500 hover:text-blue-600",children:R==="desc"?e.jsx(_e,{className:"w-5 h-5"}):e.jsx(Pe,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex bg-slate-100 rounded-2xl p-1",children:[e.jsx("button",{onClick:()=>V("list"),className:`px-4 py-2 rounded-xl transition-all ${A==="list"?"bg-white shadow-sm text-blue-600":"text-slate-600 hover:text-slate-800"}`,children:"Liste"}),e.jsx("button",{onClick:()=>V("grid"),className:`px-4 py-2 rounded-xl transition-all ${A==="grid"?"bg-white shadow-sm text-blue-600":"text-slate-600 hover:text-slate-800"}`,children:"Grille"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-slate-50 to-blue-50 rounded-2xl p-4 mb-6 border border-slate-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:$.length})}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium text-slate-700",children:[$.length," tâche",$.length!==1?"s":""," trouvée",$.length!==1?"s":""]}),a&&e.jsxs("span",{className:"text-slate-500 text-sm ml-2",children:['pour "',a,'"']})]})]}),e.jsxs("div",{className:"flex items-center text-sm text-slate-500",children:[e.jsx(ee,{className:"w-4 h-4 mr-1"}),"Mis à jour il y a quelques instants"]})]}),e.jsx(B,{children:(c!=="all"||h!=="all")&&e.jsxs(j.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-200 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-blue-800 flex items-center gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),"Filtres actifs"]}),e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>{r("all"),L("all")},className:"text-xs text-blue-600 hover:text-blue-700 hover:bg-blue-100",children:"Effacer tout"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[c!=="all"&&e.jsx(ae,{icon:c==="local"?"📍":"💻",label:c==="local"?"Sur place":"À distance",onRemove:()=>r("all"),variant:"primary"}),h!=="all"&&e.jsx(ae,{icon:K[h],label:h==="urgent"?"Urgentes":h==="high"?"Élevées":h==="medium"?"Moyennes":"Faibles",onRemove:()=>L("all"),variant:h==="urgent"?"danger":h==="high"?"warning":h==="medium"?"secondary":"success"})]})]})}),g&&l&&e.jsxs(j.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-between bg-gradient-to-r from-emerald-50 to-teal-50 p-6 rounded-2xl border border-emerald-200",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl flex items-center justify-center",children:e.jsx(I,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-lg font-semibold text-emerald-800",children:"Trier par proximité"}),e.jsx("p",{className:"text-sm text-emerald-600",children:"Prioriser les tâches près de votre position"})]})]}),e.jsx("button",{onClick:()=>oe(!S),className:`relative inline-flex h-8 w-16 items-center rounded-full transition-all duration-300 ${S?"bg-gradient-to-r from-emerald-600 to-teal-600 shadow-lg":"bg-slate-300"}`,children:e.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white shadow-lg transition-transform duration-300 ${S?"translate-x-9":"translate-x-1"}`})})]})]}),e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.8},children:$.length===0?e.jsx(Z,{className:"text-center py-20 bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-white/50",children:e.jsxs(j.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6},children:[e.jsx("div",{className:"text-9xl mb-8",children:"🤝"}),e.jsx("h3",{className:"text-3xl font-bold text-slate-800 mb-4",children:"Aucune tâche trouvée"}),e.jsx("p",{className:"text-slate-600 text-xl mb-8 max-w-2xl mx-auto leading-relaxed",children:a||c!=="all"||h!=="all"?"Aucune tâche ne correspond à vos critères de recherche. Essayez de modifier vos filtres.":"Soyez le premier à créer une tâche et inspirez votre communauté à s'entraider !"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(v,{onClick:()=>d("/create-task"),className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-8 py-4 rounded-2xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[e.jsx(F,{className:"w-5 h-5 mr-2"}),"Créer ma première tâche"]}),(a||c!=="all"||h!=="all")&&e.jsxs(v,{onClick:()=>{x(""),r("all"),L("all")},variant:"outline",className:"px-8 py-4 rounded-2xl border-slate-300 hover:border-blue-500 hover:text-blue-600",children:[e.jsx(q,{className:"w-5 h-5 mr-2"}),"Effacer les filtres"]})]})]})}):e.jsx("div",{className:`grid gap-6 ${A==="grid"?"md:grid-cols-2 xl:grid-cols-3":"grid-cols-1"}`,children:$.map((s,i)=>e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.05,duration:.4},layout:!0,children:e.jsxs(Z,{className:`group relative overflow-hidden bg-white/90 backdrop-blur-sm rounded-3xl shadow-xl border border-white/50 hover:shadow-2xl hover:border-blue-200 transition-all duration-500 transform hover:scale-[1.02] ${A==="grid"?"p-6":"p-8"}`,children:[e.jsx("div",{className:`absolute top-0 left-0 w-full h-1 bg-gradient-to-r ${s.priority==="urgent"?"from-red-500 to-red-600":s.priority==="high"?"from-orange-500 to-orange-600":s.priority==="medium"?"from-yellow-500 to-yellow-600":"from-green-500 to-green-600"}`}),e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex items-start space-x-4 flex-1 min-w-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-2xl flex items-center justify-center shadow-sm group-hover:shadow-md transition-shadow",children:e.jsx("span",{className:"text-2xl",children:ue[s.category]})}),e.jsx("div",{className:`absolute -bottom-1 -right-1 w-6 h-6 rounded-full flex items-center justify-center text-xs shadow-sm ${s.priority==="urgent"?"bg-red-500":s.priority==="high"?"bg-orange-500":s.priority==="medium"?"bg-yellow-500":"bg-green-500"}`,children:K[s.priority]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2 line-clamp-2 cursor-pointer hover:text-blue-600 transition-colors",onClick:()=>Q(s.id),children:s.title}),e.jsxs("div",{className:"flex items-center flex-wrap gap-3",children:[e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${he[s.priority]}`,children:s.priority.charAt(0).toUpperCase()+s.priority.slice(1)}),e.jsx("span",{className:"text-sm text-slate-500 flex items-center",children:s.category==="local"?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-3 h-3 mr-1"}),"Sur place"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"w-3 h-3 mr-1"}),"À distance"]})}),g&&l&&s.latitude&&s.longitude&&e.jsxs("span",{className:"text-sm text-emerald-600 flex items-center font-medium",children:[e.jsx(qe,{className:"w-3 h-3 mr-1"}),Le(Se(g,l,s.latitude,s.longitude))]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>Q(s.id),className:"p-2 text-slate-500 hover:text-blue-600 hover:bg-blue-50 rounded-xl",children:e.jsx(se,{className:"w-4 h-4"})}),m&&s.user_id===m.id&&e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>fe(s.id),className:"p-2 text-slate-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl",children:e.jsx(ze,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-slate-600 mb-6 leading-relaxed line-clamp-3",children:s.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-4 border border-blue-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(ee,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-semibold text-slate-700",children:[s.estimated_duration,"h"]}),e.jsx("div",{className:"text-xs text-slate-500",children:"Durée estimée"})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 rounded-2xl p-4 border border-emerald-100",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-emerald-500 rounded-full flex items-center justify-center",children:e.jsx(Ce,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-700",children:s.budget_credits}),e.jsx("div",{className:"text-xs text-slate-500",children:"Crédits"})]})]})})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-slate-600 bg-slate-50 rounded-xl p-3",children:[e.jsx(z,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"font-medium truncate",children:s.location})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-sm font-semibold text-slate-700 mb-3 flex items-center",children:[e.jsx(Te,{className:"w-4 h-4 mr-2 text-purple-600"}),"Compétences requises"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.required_skills.slice(0,A==="grid"?3:5).map((w,M)=>e.jsx("span",{className:"inline-flex items-center px-3 py-1 bg-gradient-to-r from-purple-50 to-indigo-50 text-purple-700 text-sm font-medium rounded-full border border-purple-200 hover:from-purple-100 hover:to-indigo-100 transition-colors",children:w},M)),s.required_skills.length>(A==="grid"?3:5)&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-slate-100 text-slate-600 text-sm rounded-full",children:["+",s.required_skills.length-(A==="grid"?3:5)," autres"]})]})]}),s.tags.length>0&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.tags.slice(0,A==="grid"?3:6).map((w,M)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-slate-100 hover:bg-slate-200 text-slate-600 text-xs rounded-full cursor-pointer transition-colors",children:["#",w]},M)),s.tags.length>(A==="grid"?3:6)&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-slate-100 text-slate-500 text-xs rounded-full",children:["+",s.tags.length-(A==="grid"?3:6)]})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-slate-200",children:[e.jsx("div",{className:"flex items-center space-x-3",children:m&&s.user_id!==m.id?e.jsxs(e.Fragment,{children:[e.jsxs(v,{onClick:()=>pe(s.id),className:"bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white px-6 py-2 rounded-2xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"Offrir de l'aide"]}),e.jsxs(v,{onClick:()=>ge(s.id),variant:"outline",className:"border-slate-300 text-slate-700 hover:bg-slate-50 hover:border-slate-400 px-6 py-2 rounded-2xl transition-all duration-200",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Contacter"]})]}):m?e.jsxs("div",{className:"text-sm text-slate-500 italic flex items-center",children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),"Votre tâche"]}):e.jsxs(v,{onClick:()=>d("/login"),className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-6 py-2 rounded-2xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"Se connecter pour aider"]})}),e.jsx("div",{className:"text-right text-sm text-slate-500",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:new Date(s.created_at).getFullYear()!==new Date().getFullYear()?"numeric":void 0})})]})})]})]})},s.id))})}),$.length>10&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.5},className:"text-center mt-12",children:e.jsxs(v,{variant:"outline",className:"px-8 py-4 rounded-2xl border-slate-300 hover:border-blue-500 hover:text-blue-600 text-lg",children:[e.jsx(se,{className:"w-5 h-5 mr-2"}),"Voir plus de tâches"]})})]})}),e.jsx(Je,{isOpen:ce,onClose:()=>G(!1),selectedCategory:c,onCategoryChange:r,selectedPriority:h,onPriorityChange:L}),e.jsx("div",{className:"px-6 pb-6",children:e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.6},children:e.jsx(Xe,{hasPermission:!!(g&&l),isLoading:T,error:_,onRequestLocation:U})})}),e.jsx("div",{className:"fixed bottom-6 right-6 lg:hidden z-50",children:e.jsx(j.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:1.2,duration:.5,type:"spring",stiffness:200},children:e.jsx(v,{onClick:()=>d("/create-task"),className:"w-16 h-16 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-full shadow-2xl hover:shadow-3xl transform hover:scale-110 transition-all duration-300 flex items-center justify-center",children:e.jsx(F,{className:"w-8 h-8"})})})}),e.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[e.jsx("div",{className:"absolute top-1/4 -left-64 w-96 h-96 bg-blue-400/5 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 -right-64 w-96 h-96 bg-purple-400/5 rounded-full blur-3xl animate-pulse",style:{animationDelay:"3s"}}),e.jsx("div",{className:"absolute top-3/4 left-1/3 w-64 h-64 bg-emerald-400/5 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1.5s"}})]})]})};export{js as default};
