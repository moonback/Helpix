import{c as f,u as L,r as m,j as e,B as j,P as V}from"./index-CjebVJkO.js";import{u as H}from"./taskStore-MOUmrc_1.js";import{B as a,m as x}from"./Button-DEGNrHwP.js";import{C as l}from"./Card-jpH0K7U9.js";import{I as G}from"./Input-DqtLaMe4.js";import{F as _,P as J}from"./pause-DRwFAZ2T.js";import{T as K}from"./trending-up-JhOAwKRR.js";import{S as Q}from"./search-B2S3MmgA.js";import{F as W}from"./filter-B7CfSgt5.js";import{C as g,P as C}from"./play-BkcAmz_u.js";import{C as k,T as X}from"./target-BSz0SWKc.js";import{A as Y}from"./alert-triangle-gBqFAeeF.js";import{C as T}from"./calendar-X3IWeBnO.js";import{U as Z}from"./users-DCvgroNf.js";import{P as ee}from"./pen-square-DSvSF-xr.js";import{M as se}from"./message-square-BXqTk9hV.js";import{S}from"./square-E0dbnxxy.js";import{E as te}from"./eye-DM3G7hZI.js";import"./utils-CKFTCDAY.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=f("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=f("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=f("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Ce=()=>{const o=L(),{fetchTasks:D,isLoading:P,getDashboardData:A,filterTasks:E,sortTasks:F,searchTasks:M,taskFilters:i,setTaskFilters:h,taskSort:c,setTaskSort:b,updateTaskStatus:R}=H(),[p,$]=m.useState(""),[d,u]=m.useState("overview"),[N,z]=m.useState(!1);m.useEffect(()=>{D()},[]);const t=A(),B=E(i),O=F(B,c),v=p?M(p):O,U={open:"bg-blue-100 text-blue-800 border-blue-200",in_progress:"bg-yellow-100 text-yellow-800 border-yellow-200",completed:"bg-green-100 text-green-800 border-green-200",cancelled:"bg-red-100 text-red-800 border-red-200",on_hold:"bg-orange-100 text-orange-800 border-orange-200",review:"bg-purple-100 text-purple-800 border-purple-200"},y={low:"bg-emerald-100 text-emerald-800 border-emerald-200",medium:"bg-amber-100 text-amber-800 border-amber-200",high:"bg-orange-100 text-orange-800 border-orange-200",urgent:"bg-red-100 text-red-800 border-red-200"},q={simple:"bg-green-100 text-green-800 border-green-200",moderate:"bg-yellow-100 text-yellow-800 border-yellow-200",complex:"bg-red-100 text-red-800 border-red-200"},w=async(s,r)=>{try{await R(s,r)}catch(n){console.error("Erreur lors du changement de statut:",n)}},I=s=>{switch(s){case"open":return e.jsx(S,{className:"w-4 h-4"});case"in_progress":return e.jsx(C,{className:"w-4 h-4"});case"completed":return e.jsx(g,{className:"w-4 h-4"});case"cancelled":return e.jsx(le,{className:"w-4 h-4"});case"on_hold":return e.jsx(J,{className:"w-4 h-4"});case"review":return e.jsx(te,{className:"w-4 h-4"});default:return e.jsx(S,{className:"w-4 h-4"})}};return P?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center",children:e.jsx(j,{className:"w-10 h-10 text-white"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full animate-ping opacity-20"})]}),e.jsxs("div",{className:"animate-pulse",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-700 mb-2",children:"Chargement du tableau de bord..."}),e.jsx("p",{className:"text-slate-500",children:"Préparation de vos métriques"})]})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 pb-20",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>o(-1),className:"p-2",children:e.jsx(j,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tableau de Bord"})]}),e.jsxs(a,{onClick:()=>o("/create-task"),className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Nouvelle Tâche"]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(a,{variant:d==="overview"?"primary":"ghost",onClick:()=>u("overview"),className:"flex items-center space-x-2",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{children:"Vue d'ensemble"})]}),e.jsxs(a,{variant:d==="tasks"?"primary":"ghost",onClick:()=>u("tasks"),className:"flex items-center space-x-2",children:[e.jsx(_,{className:"w-4 h-4"}),e.jsx("span",{children:"Toutes les tâches"})]}),e.jsxs(a,{variant:d==="analytics"?"primary":"ghost",onClick:()=>u("analytics"),className:"flex items-center space-x-2",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsx("span",{children:"Analytics"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),e.jsx(G,{placeholder:"Rechercher des tâches...",value:p,onChange:s=>$(s.target.value),className:"pl-10 w-64"})]}),e.jsxs(a,{variant:"outline",onClick:()=>z(!N),className:"flex items-center space-x-2",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsx("span",{children:"Filtres"})]})]})]})}),N&&e.jsxs(x.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white rounded-2xl shadow-lg border border-slate-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filtres avancés"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut"}),e.jsxs("select",{multiple:!0,value:i.status||[],onChange:s=>{const r=Array.from(s.target.selectedOptions,n=>n.value);h({...i,status:r})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"open",children:"Ouvertes"}),e.jsx("option",{value:"in_progress",children:"En cours"}),e.jsx("option",{value:"completed",children:"Terminées"}),e.jsx("option",{value:"cancelled",children:"Annulées"}),e.jsx("option",{value:"on_hold",children:"En attente"}),e.jsx("option",{value:"review",children:"En révision"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priorité"}),e.jsxs("select",{multiple:!0,value:i.priority||[],onChange:s=>{const r=Array.from(s.target.selectedOptions,n=>n.value);h({...i,priority:r})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"low",children:"Faible"}),e.jsx("option",{value:"medium",children:"Moyenne"}),e.jsx("option",{value:"high",children:"Élevée"}),e.jsx("option",{value:"urgent",children:"Urgente"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Complexité"}),e.jsxs("select",{multiple:!0,value:i.complexity||[],onChange:s=>{const r=Array.from(s.target.selectedOptions,n=>n.value);h({...i,complexity:r})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"simple",children:"Simple"}),e.jsx("option",{value:"moderate",children:"Modérée"}),e.jsx("option",{value:"complex",children:"Complexe"})]})]})]})]}),d==="overview"&&e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(l,{className:"p-6 bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Total des tâches"}),e.jsx("p",{className:"text-3xl font-bold",children:t.total_tasks})]}),e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(_,{className:"w-6 h-6"})})]})}),e.jsx(l,{className:"p-6 bg-gradient-to-br from-green-500 to-green-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Terminées"}),e.jsx("p",{className:"text-3xl font-bold",children:t.completed_tasks})]}),e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(g,{className:"w-6 h-6"})})]})}),e.jsx(l,{className:"p-6 bg-gradient-to-br from-yellow-500 to-yellow-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-100 text-sm font-medium",children:"En cours"}),e.jsx("p",{className:"text-3xl font-bold",children:t.in_progress_tasks})]}),e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(k,{className:"w-6 h-6"})})]})}),e.jsx(l,{className:"p-6 bg-gradient-to-br from-red-500 to-red-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-red-100 text-sm font-medium",children:"En retard"}),e.jsx("p",{className:"text-3xl font-bold",children:t.overdue_tasks})]}),e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(Y,{className:"w-6 h-6"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(l,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Répartition par statut"}),e.jsx("div",{className:"space-y-3",children:Object.entries({Ouvertes:t.total_tasks-t.completed_tasks-t.in_progress_tasks,"En cours":t.in_progress_tasks,Terminées:t.completed_tasks,"En attente":t.total_tasks-t.completed_tasks-t.in_progress_tasks-(t.total_tasks-t.completed_tasks-t.in_progress_tasks)}).map(([s,r])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:s}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${r/t.total_tasks*100}%`}})}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:r})]})]},s))})]}),e.jsxs(l,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Taux de completion"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:[t.performance_metrics.completion_rate.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Tâches en retard"}),e.jsx("span",{className:"text-lg font-bold text-red-600",children:t.overdue_tasks})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Deadlines à venir"}),e.jsx("span",{className:"text-lg font-bold text-yellow-600",children:t.upcoming_deadlines.length})]})]})]})]}),t.upcoming_deadlines.length>0&&e.jsxs(l,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(T,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{children:"Deadlines à venir (3 prochains jours)"})]}),e.jsx("div",{className:"space-y-3",children:t.upcoming_deadlines.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Échéance: ",new Date(s.deadline).toLocaleDateString()]})]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${y[s.priority]}`,children:s.priority})]},s.id))})]})]}),d==="tasks"&&e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Trier par:"}),e.jsxs("select",{value:c.field,onChange:s=>b({...c,field:s.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"created_at",children:"Date de création"}),e.jsx("option",{value:"updated_at",children:"Dernière modification"}),e.jsx("option",{value:"deadline",children:"Échéance"}),e.jsx("option",{value:"priority",children:"Priorité"}),e.jsx("option",{value:"progress",children:"Progression"}),e.jsx("option",{value:"budget_credits",children:"Budget"}),e.jsx("option",{value:"estimated_duration",children:"Durée estimée"})]}),e.jsx(a,{variant:"ghost",onClick:()=>b({...c,direction:c.direction==="asc"?"desc":"asc"}),className:"p-2",children:c.direction==="asc"?e.jsx(re,{className:"w-4 h-4"}):e.jsx(ae,{className:"w-4 h-4"})})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[v.length," tâche(s) trouvée(s)"]})]})}),e.jsx("div",{className:"space-y-4",children:v.map(s=>e.jsx(l,{className:"p-6 hover:shadow-lg transition-shadow",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.title}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${U[s.status]}`,children:[I(s.status)," ",s.status]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${y[s.priority]}`,children:s.priority}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${q[s.complexity]}`,children:s.complexity})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:s.description}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.estimated_duration,"h"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.progress_percentage,"%"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{children:s.deadline?new Date(s.deadline).toLocaleDateString():"Aucune"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{children:s.assigned_to?"Assignée":"Non assignée"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Progression"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[s.progress_percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${s.progress_percentage}%`}})}),s.current_step&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Étape actuelle: ",s.current_step]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(a,{variant:"outline",size:"sm",onClick:()=>o(`/edit-task/${s.id}`),className:"flex items-center space-x-2",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{children:"Modifier"})]}),s.status==="open"&&e.jsxs(a,{variant:"outline",size:"sm",onClick:()=>w(s.id,"in_progress"),className:"flex items-center space-x-2",children:[e.jsx(C,{className:"w-4 h-4"}),e.jsx("span",{children:"Démarrer"})]}),s.status==="in_progress"&&e.jsxs(a,{variant:"outline",size:"sm",onClick:()=>w(s.id,"completed"),className:"flex items-center space-x-2",children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx("span",{children:"Terminer"})]}),e.jsxs(a,{variant:"ghost",size:"sm",onClick:()=>o("/chat"),className:"flex items-center space-x-2",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{children:"Discuter"})]})]})]})})},s.id))})]}),d==="analytics"&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:e.jsxs(l,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Analytics avancées"}),e.jsx("p",{className:"text-gray-600",children:"Cette section sera développée avec des graphiques interactifs et des analyses détaillées."})]})})]})})]})};export{Ce as default};
